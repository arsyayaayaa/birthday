<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Birthday Climb â€“ Baiq Ila Karunia ğŸ‚</title>

<style>
    body{
        margin:0;
        background:#121212;
        overflow:hidden;
        font-family: 'Verdana';
    }
    #hud{
        position:fixed;
        top:14px; left:14px;
        color:white;
        background:rgba(0,0,0,.35);
        padding:8px 12px;
        border-radius:8px;
        font-size:14px;
        z-index:10;
    }
    #messageBox{
        position:fixed;
        left:50%;
        transform:translateX(-50%);
        top:20px;
        background:rgba(0,0,0,.6);
        color:white;
        padding:10px 16px;
        font-size:14px;
        border-radius:8px;
        z-index:20;
        display:none;
    }
    canvas{
        background:linear-gradient(#87CEEB, #8cd88c);
        display:block;
        margin:0 auto;
        border:4px solid #000;
        image-rendering:pixelated;
    }
</style>
</head>

<body>

<div id="hud">â¤ï¸ Journey Level: <span id="lvl">0</span> / 24</div>
<div id="messageBox"></div>

<canvas id="game" width="900" height="600"></canvas>

<script>
/* ============ CONFIG ============ */
const CANVAS = document.getElementById("game");
const ctx = CANVAS.getContext("2d");
const W = CANVAS.width, H = CANVAS.height;

/* CAMERA OFFSET */
let worldOffsetY = 0;

/* PLAYER */
const player = {
    x: W/2 - 20,
    y: 3000,   // starting very low
    w: 42,
    h: 42,
    vx: 0,
    vy: 0,
    onGround: false
};

/* SPRITE (chibi girl) */
const sprite = new Image();
sprite.src = "chibi.png"; // GANTI FILEMU

/* PHYSICS */
const GRAV = 0.55;
const MOVE = 0.7;
const JUMP = 12;

/* INPUT */
let keys = {left:false, right:false, up:false};
onkeydown=e=>{
    if(e.key==="ArrowLeft") keys.left=true;
    if(e.key==="ArrowRight") keys.right=true;
    if(e.key==="ArrowUp" || e.key===" ") keys.up=true;
};
onkeyup=e=>{
    if(e.key==="ArrowLeft") keys.left=false;
    if(e.key==="ArrowRight") keys.right=false;
    if(e.key==="ArrowUp" || e.key===" ") keys.up=false;
};

/* PLATFORMS (24 LEVEL) */
let platforms = [];
let messages = [];

const messageList = [
  "Setiap langkah kecilmu berarti â¤ï¸",
  "Kamu makin kuat setiap harinya âœ¨",
  "Senyummu itu hadiah untuk dunia ğŸ’›",
  "Terus naik, jangan menyerah!",
  "Ada banyak hal indah menunggumu ğŸ’",
  "Kamu sudah jauh berkembang ğŸŒ±",
  "Makin tinggi, makin hebat!",
  "Perjalanan ini milikmu sendiri ğŸ’–",
  "Tetap lembut, tapi kuat ğŸ’«",
  "Bahagiamu itu penting ğŸ’•",
  "Nikmati prosesnya ya!",
  "Pelan-pelan tapi pasti ğŸŒŸ",
  "Kamu pantas dirayakan ğŸ‰",
  "Dunia beruntung punya kamu ğŸ’",
  "Hidupmu itu berharga âœ¨",
  "Tetap percaya diri ya!",
  "Kamu sudah hebat sampai sini â¤ï¸",
  "Semoga hari-harimu makin indah ğŸŒ¸",
  "Yang baik selalu datang padamu âœ¨",
  "Semesta sayang sama kamu ğŸ’«",
  "Terima kasih sudah bertahan ğŸ’–",
  "Ayo sedikit lagi! ğŸ’›",
  "Satu langkah terakhir!",
  "Selamat! Kamu sampai puncak ğŸ‚"
];

/* GENERATE 24 PLATFORMS */
let baseY = 2800;
for(let i=0;i<24;i++){
    let x = 200 + Math.random()*500;
    let y = baseY - i*110;

    platforms.push({x, y, w:180, h:18, id:i});
    messages.push(messageList[i]);
}

/* GOAL FLAG (TOP) */
const flag = {
    x: W/2 - 25,
    y: platforms[23].y - 160,
    w:50, h:160
};

/* SOUND: BIRTHDAY SONG (40s â†’ 70s) */
let bg = new Audio("music.m4a"); 
bg.volume = 0.5;

/* ============ FUNCTIONS ============ */

/* DRAW PLAYER */
function drawPlayer(){
    let sx = player.x;
    let sy = player.y - worldOffsetY;
    ctx.drawImage(sprite, sx, sy, player.w, player.h);
}

/* DRAW PLATFORM */
function drawPlatform(p){
    let sy = p.y - worldOffsetY;
    ctx.fillStyle = "#8b4";
    ctx.fillRect(p.x, sy, p.w, p.h);
}

/* DRAW FLAG */
function drawFlag(){
    let sy = flag.y - worldOffsetY;

    ctx.fillStyle="#333";
    ctx.fillRect(flag.x, sy, flag.w, flag.h);

    ctx.fillStyle="#ff77aa";
    ctx.fillRect(flag.x+flag.w, sy+20, 70, 30);
}

/* MESSAGE BOX */
function showMessage(txt){
    const box = document.getElementById("messageBox");
    box.innerText = txt;
    box.style.display = "block";
    setTimeout(()=> box.style.display="none", 1500);
}

/* UPDATE */
function update(){

    /* INPUT MOVE */
    if(keys.left) player.vx -= MOVE;
    if(keys.right) player.vx += MOVE;

    /* JUMP */
    if(keys.up && player.onGround){
        player.vy = -JUMP;
        player.onGround = false;

        bg.currentTime = 40;
        bg.play();
    }

    /* gravity */
    player.vy += GRAV;

    /* friction */
    player.vx *= 0.92;

    /* MOVE PLAYER */
    player.x += player.vx;
    player.y += player.vy;

    /* COLLISION */
    player.onGround = false;
    for(let p of platforms){
        if(player.x < p.x+p.w &&
           player.x+player.w > p.x &&
           player.y+player.h > p.y &&
           player.y+player.h < p.y + p.h + 15 &&
           player.vy > 0){

            player.y = p.y - player.h;
            player.vy = 0;
            player.onGround = true;

            document.getElementById("lvl").innerText = p.id+1;

            showMessage(messages[p.id]);
        }
    }

    /* CAMERA FOLLOW */
    const targetScreenY = H * 0.45;
    const playerScreenY = player.y - worldOffsetY;

    worldOffsetY += (playerScreenY - targetScreenY) * 0.10;
    if(worldOffsetY < 0) worldOffsetY = 0;

    /* END CONDITION */
    if(player.x < flag.x+flag.w &&
       player.x+player.w > flag.x &&
       player.y < flag.y+flag.h){

        bg.currentTime = 40;
        bg.play();

        alert("ğŸ‰ Selamat! Kamu mencapai puncak ğŸ‰\nHappy Birthday Baiq Ila Karunia!");
    }
}

/* DRAW EVERYTHING */
function draw(){
    ctx.clearRect(0,0,W,H);

    platforms.forEach(drawPlatform);
    drawFlag();
    drawPlayer();
}

/* GAME LOOP */
function loop(){
    update();
    draw();
    requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
